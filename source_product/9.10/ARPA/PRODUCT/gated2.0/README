/************************************************************************
*									*
*	GateD, Release 2						*
*									*
*	Copyright (c) 1990,1991 by Cornell University			*
*	    All rights reserved.					*
*									*
*	    Royalty-free licenses to redistribute GateD Release		*
*	    2 in whole or in part may be obtained by writing to:	*
*									*
*	    GateDaemon Project						*
*	    Information Technologies/Network Resources			*
*	    143 Caldwell Hall						*
*	    Cornell University						*
*	    Ithaca, NY 14853-2602					*
*									*
*	THIS SOFTWARE IS PROVIDED "AS IS" AND WITHOUT ANY		*
*	EXPRESS OR IMPLIED WARRANTIES, INCLUDING, WITHOUT		*
*	LIMITATION, THE IMPLIED WARRANTIES OF MERCHANTABILITY		*
*	AND FITNESS FOR A PARTICULAR PURPOSE.				*
*									*
*	GateD is based on Kirton's EGP, UC Berkeley's routing		*
*	daemon	 (routed), and DCN's HELLO routing Protocol.		*
*	Development of Release 2 has been supported by the		*
*	National Science Foundation.					*
*									*
*		Jeffrey C Honig <jch@gated.cornell.edu>			*
*		Scott W Brim <swb@gated.cornell.edu>			*
*									*
*	The following acknowledgements and thanks apply:		*
*									*
*		Mark Fedor <fedor@psi.com> for the development		*
*		and maintenance up to release 1.3.1 and his		*
*		continuing advice.					*
*									*
*		Dennis Ferguson <dennis@canet.ca>			*
*									*
*************************************************************************
*									*
*      Portions of this software may fall under the following		*
*      copyrights:							*
*									*
*	Copyright (c) 1988 Regents of the University of California.	*
*	All rights reserved.						*
*									*
*	Redistribution and use in source and binary forms are		*
*	permitted provided that the above copyright notice and		*
*	this paragraph are duplicated in all such forms and that	*
*	any documentation, advertising materials, and other		*
*	materials related to such distribution and use			*
*	acknowledge that the software was developed by the		*
*	University of California, Berkeley.  The name of the		*
*	University may not be used to endorse or promote		*
*	products derived from this software without specific		*
*	prior written permission.  THIS SOFTWARE IS PROVIDED		*
*	``AS IS'' AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES,	*
*	INCLUDING, WITHOUT LIMITATION, THE IMPLIED WARRANTIES OF	*
*	MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.		*
*									*
************************************************************************/


INSTALLATION OF GATED:

	1. cd src, edit Makefile.config to suit your system.  The
	   comments in this file will help you determine what to
	   define for your system.

	   Normally you never have to edit Makefile.gated or
	   Makefile.depend. 

	2. Build dependencies.

	   Gated is distributed with a list of dependencies in
	   Makefile.depend.  These do not contain any references
	   outside of the gated source tree.  If you modify your
	   system include files frequently you may want to update this
	   to include system files.

	   To do this, edit Makefile.config and make sure the CCD
	   variable is correct for your system.  Then type 'make
	   depend'.
	   
	3. Compile gated: "make".  It is necessary to have "." in your
	   path when doing this.  

	4. Become root and install gated, "./make install".

	   Note that "make" is a shell script in the gated source
	   directory.  This was required to be able to split the
	   Makefile into Makefile.config, Makefile.gated and
	   Makefile.depend.  When invoking this shell script as root
	   you need to prefix it with ./ as the current directory is
	   not usually near the front of root's path.

	5. cd man, edit Makefile and install the man page "make install".

	6. make up a configuration file.  This is not too hard.  Sample
	   config files are in the conf directory and the man page
	   explains all config options.  install the config file in
	   /etc/gated.conf

	7. Take cover and .... FIRE IT UP!

	8. Take a look at the aux/ directory for some handy scripts.

	9. If you are using the same source directory for many different
	   architectures, it is advisable to do a 'make cleanall' before
	   building for the new architecture.  Sometimes the code
	   generated by lex and yacc are not portable.

	
Running Gated on BSD 4.3 Reno systems:

	See the comments in src/Makefile.gated.


Running Gated on SunOS 4.0 systems:

	If gated gets sendto() network unreachable problems when running
	on SunOS 4.0 systems, add `hostname` to the ifconfigs for
	ie0/le0/ec0 in /etc/rc.local.  Otherwise SunOS has a
	misconception of the route to the attached network.


Running HELLO and/or EGP on 4.2 based systems:

	If you would like to run HELLO or EGP on a 4.2 based system such as
	Ultrix 1.2, 2.0, 2.1 and SunOS 3.x you will need to add the
	following code to the following modules and rebuild your kernel. 

	/sys/netinet/in.h:

#define IPPROTO_EGP		8		/* exterior gateway protocol */

#define IPPROTO_HELLO		63		/* Fuzzball HELLO protocol */

	/sys/netinet/in_proto.c for SunOS 3.x:


 { SOCK_RAW,	PF_INET,	IPPROTO_HELLO,	PR_ATOMIC|PR_ADDR,
   rip_input,	rip_output,	0,	0,
   raw_usrreq,
   0,		0,		0,		0,
 },
 { SOCK_RAW,	PF_INET,	IPPROTO_EGP,	PR_ATOMIC|PR_ADDR,
   rip_input,	rip_output,	0,	0,
   raw_usrreq,
   0,		0,		0,		0,
 },


	/sys/netinet/in_proto.c for Ultrix 1.2, 2.0 and 2.2

{ SOCK_RAW,     &inetdomain,    IPPROTO_HELLO,    PR_ATOMIC|PR_ADDR,
  rip_input,    rip_output,     0,              0,
  raw_usrreq,
  0,            0,              0,              0,
  0,            0,              0,
},
{ SOCK_RAW,     &inetdomain,    IPPROTO_EGP,    PR_ATOMIC|PR_ADDR,
  rip_input,    rip_output,     0,              0,
  raw_usrreq,
  0,            0,              0,              0,
  0,            0,              0,
},


	Gated and PSI's (formerly NYSERnet's) SNMP code:

  Gated will not work with the current snmpd from PSI (3.4).  Patches
have been forwarded to PSI and it may be possible to make them
available.


		Bug reports, fixes, comments and HELP

If you need assistance or have any questions, don't bang your head
against the wall.  Post to the mailing list.  There are many people with
gated experience who may be able to take a moment to help.

When reporting a problem with gated, several pieces of information
will greatly assist in debugging:

    1)  Gated version

    2)  What system it is running on, hardware, software and
	versions. 

    3)  Your configuration file.

    4)  The interface configuration.  It helps to provide this as both
        the output of netstat -in (netstat -i -n on 4.2 based systems)
	and an ifconfig for each interface.

    5)  The routing table, i.e. netstat -rn (netstat -r -n on 4.2
        based systems)

    6)  Gated's idea of the above.  To get this start gated with -t
        (which is short for -tier).  Setting tracing options in the
	config file will not get all this information because gated
	scans the interfaces before parsing the config file. So you
	must specify tracing on the command line.

    6)  Trace output of your problem.  If it is a RIP problem, turn on
	RIP tracing, an EGP problem, turn on EGP tracing.


The mailing list can be reached as:

	gated-people@gated.cornell.edu
	
Please report bugs, enhancements and comments to the mailing list or
directly to the gated maintainers at the following address:

	gated@gated.cornell.edu
	
To subscribe to the mailing list, send mail to the following addresses. 
Note that your request is processed by a person, not a script.  If
several people at your site are interested in being on the mailing list,
please consider setting up a local alias.  Send your requests to:

	gated-people-request@gated.cornell.edu

There is an archive server for the gated mailing list.  For information
on how to use it, send a message with a Subject: line of 'help' (no
quotes) to:

	gated-people-archive@gated.cornell.edu

I can be reached directly at:

	Jeffrey C Honig
	Information Technologies/Network Resources
	143 Caldwell Hall
	Cornell University
	Ithaca, NY  14853-2602

	Phone: 607/255-6460
	FAX: 607/255-5771

	jch@gated.cornell.edu

Thanks.

Jeff

